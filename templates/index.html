<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>FinanceTracker</title>
    <style>
        /* Styl dla tabeli, aby była responsywna */
        .table-container {
            overflow-x: auto;  /* Dodaje przewijanie poziome */
            -webkit-overflow-scrolling: touch; /* Dla lepszej responsywności na urządzeniach mobilnych */
        }

        table {
            width: 100%;  /* Tabela będzie miała 100% szerokości kontenera */
            border-collapse: collapse;  /* Usuwa odstępy między komórkami */
        }

        th, td {
            padding: 8px;  /* Dodaje odstępy w komórkach */
            text-align: left;  /* Wyrównanie tekstu */
            border: 1px solid #ddd;  /* Granice komórek */
        }

        /* Dla małych ekranów dodajemy trochę stylu */
        @media (max-width: 600px) {
            table {
                font-size: 12px;  /* Zmniejszamy czcionkę na małych ekranach */
            }
        }
    </style>
</head>
<body>
<div style="text-align: center;">
    <h1>FinanceTracker</h1>
    <h2>Ostatnio zapisana data: {{ values[0] }} </h2>
    <h3>Wczytaj swoją historię konta z pliku .CSV (nowszą od ostatniej daty)</h3>
    <form action="/" method="post" enctype="multipart/form-data">
        <label>
            <input type="file" name="file" id="file" accept=".csv"/>
            <input type="submit" value="Wybierz" id = "save_csv" name="save_csv"/>
        </label>
    </form>
    <h1>Saldo:</h1>
    <h2>{{ values[1][0] }} {{ values[1][1] }}</h2>

<h1>Zestawienie zysków i wydatków na dany miesiąc: </h1>
<div style="width: 800px; margin: 0 auto"><canvas id="LineChartCreditsDebits"></canvas></div>
<div class="table-container">
    <table>
        <tr style="background-color: rgba(182,182,182,0.78)">
            {% for v in values[2] %}
                <td>{{ v }}</td>
            {% endfor %}
        </tr>
        <tr style="background-color: rgba(255,57,57,0.78)">
            {% for v in values[3] %}
                <td>{{ v }}</td>
            {% endfor %}
        </tr>
        <tr style="background-color: rgba(81,250,65,0.78)">
            {% for v in values[5] %}
                <td>{{ v }}</td>
            {% endfor %}
        </tr>
    </table>
</div>

<h1>Różnica: </h1>
<div style="width: 800px; margin: 0 auto"><canvas id="LineChartDifference"></canvas></div>
<div class="table-container">
    <table>
        <tr style="background-color: rgba(182,182,182,0.78)">
            {% for v in values[2] %}
                <td>{{ v }}</td>
            {% endfor %}
            </tr>
                <tr>
                {% for v in values[6] %}
                    {% if v[0] == '-' %}
                        <td style="background-color: rgba(255,57,57,0.78)">{{ v }}</td>
                    {% endif %}
                    {% if v[0] != '-' %}
                        <td style="background-color: rgba(81,250,65,0.78)">{{ v }}</td>
                    {% endif %}
                {% endfor %}
            </tr>
    </table>
</div>
<h2>Przejdz na strone, aby dodać tagi dla użytkowników</h2>
<form action="/categories" method="post">
        <input type="submit" value="Przejdź" id = "to_categories" name="to_categories"/>
    </form>

v0 DO FRONTU
</div>

<script>
    // Send data to JS
    let values_to_js = {{ values | tojson }};
    let months_debits_to_js = {{ values[2] | tojson }};
    let debits_to_js = {{ values[3] | tojson }};
    let months_credits_to_js = {{ values[4] | tojson }};
    let credits_to_js = {{ values[5] | tojson }};
    let monthly_difference = {{ values[6] | tojson}}
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script type="module" src=" {{ url_for('static', filename='cred_deb_month_chart.js') }}"></script>
<script type="module" src=" {{ url_for('static', filename='difference_per_month_chart.js') }}"></script>

</body>
</html>